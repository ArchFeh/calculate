# Calculate path=~ name=.dconfigure chmod=700 pkg(gnome-base/gnome-core-libs)!= append=after
#!/bin/bash

wait_dbus() {
    for waittime in {0..10};
    do
        gdbus introspect -e -d org.gnome.Shell -o /org/gnome/Shell &>/dev/null && return
        sleep 1
    done
}

change_params() {
    wait_dbus
#?os_root_type==livecd#
    gdbus call -e -d org.gnome.Shell --object-path /org/gnome/Shell -m org.gnome.Shell.EnableExtension "lock_on_lid@calculate-linux.org"
#os_root_type#
}

dconf write /org/gnome/desktop/media-handling/automount true
dconf write /org/gnome/settings-daemon/plugins/power/button-power \'interactive\'
dconf write /org/gnome/settings-daemon/plugins/power/lid-close-ac-action \'blank\'


change_params &

rm ~/.dconfigure
