diff --git desktop/utils/cl_desktop.py desktop/utils/cl_desktop.py
index 28cecb5..99ee418 100644
--- desktop/utils/cl_desktop.py
+++ desktop/utils/cl_desktop.py
@@ -59,19 +59,23 @@ class ClDesktopAction(Action):
 
     # список задач для действия
     tasks = [
+         # создать домашниюю директорию
          {'name':'create_home',
           'message':__("Creating the home directory for {ur_login}"),
           'method':'Desktop.createUserDir(ur_login,ur_uid,ur_gid,ur_home_path)',
           'condition':lambda dv:not path.exists(dv.Get('ur_home_path'))
          },
+         # подключить шифрованные данные
          {'name':'ecryptfs',
           'message':__("Mounting encrypted data"),
           'method':'Desktop.createCryptDir(ur_login,ur_uid,ur_gid,'
                                           'ur_home_path,False)',
-          'condition':lambda Get:(not isMount(Get('ur_home_path')) and \
-                      Get('ur_home_crypt_set') == 'on' and 
-                      Get('install.cl_autologin') != Get('ur_login'))
+          'condition':lambda dv:(not isMount(dv.Get('ur_home_path')) and \
+                      dv.Get('ur_home_crypt_set') == 'on' and 
+                      (not dv.isModuleInstalled("install") or
+                      dv.Get('install.cl_autologin') != dv.Get('ur_login')))
          },
+         # настроить пользовательских профиль шаблонами
          {'name':'user_profile',
           'message':__("Setting up the user profile"),
           'method':'Desktop.applyTemplates(None,False,'\
@@ -79,9 +83,13 @@ class ClDesktopAction(Action):
           'condition':lambda Get: Get('cl_desktop_force_setup_set') == 'on' or \
                              Get('cl_desktop_update_profile_set') == 'on'
          },
+         # отключить ресурсы подключенные в каталоге пользователя
          {'name':'umount_userres',
           'message': _("Unmouning user resources"),
           'method':'Desktop.umountUserRes(ur_mount_dirs)',
           'condition': lambda dv:dv.Get('ur_mount_dirs'),
+          'depend': (Tasks.failed(),)},
+         {'name':'ecryptfs:umount_homedir',
+          'method':'Desktop.umountUserRes(ur_home_path)',
           'depend': (Tasks.failed(),)}
          ]
diff --git desktop/variables/desktop.py desktop/variables/desktop.py
index 65f62cf..9009061 100644
--- desktop/variables/desktop.py
+++ desktop/variables/desktop.py
@@ -282,8 +282,8 @@ class VariableUrMountDirs(ReadonlyVariable):
                                  x.startswith(mountRemoteProfileDir)),
                map(lambda x: x.split(" ")[1],
                readLinesFile('/proc/mounts'))))
-        if isMount(homeDir):
-            directories.append(homeDir)
+        #if isMount(homeDir):
+        #    directories.append(homeDir)
         return sorted(directories,reverse=True)
 
 class VariableUrPassword(ReadonlyVariable):
diff --git desktop/wsdl_desktop.py desktop/wsdl_desktop.py
index 3cbb78c..e9b883a 100644
--- desktop/wsdl_desktop.py
+++ desktop/wsdl_desktop.py
@@ -20,7 +20,6 @@ from calculate.core.server.func import WsdlBase
 from desktop import DesktopError
 from utils.cl_desktop import ClDesktopLogoutAction,ClDesktopAction
 import desktop
-import calculate.install.install as install
 
 from calculate.lib.cl_lang import setLocalTranslate,getLazyLocalTranslate
 setLocalTranslate('cl_desktop3',sys.modules[__name__])
@@ -81,7 +80,7 @@ class Wsdl(WsdlBase):
         # права для запуска метода 
         'rights':['userconfigure'],
         # объект содержащий модули для действия
-        'logic':{'Desktop':desktop.Desktop,'Install':install.Install},
+        'logic':{'Desktop':desktop.Desktop},
         # описание действия
         'action':ClDesktopAction,
         # объект переменных
