commit fa71ec0c90364e924a887f93a7998a385f0c6bc5
Author: Mike Hiretsky <mh@calculate.ru>
Date:   Mon Aug 29 11:10:47 2011 +0400

    Add execute dispatch conf before iso pack.

diff --git pym/cl_builder.py pym/cl_builder.py
index 572e6c7..0e2d119 100644
--- pym/cl_builder.py
+++ pym/cl_builder.py
@@ -231,6 +231,13 @@ class cl_builder(color_print):
                 removeKernelSources)
             self.printByResult(True)
 
+    def dispatchConf(self, distrPath):
+        """Execute dispatch conf for """
+        self.printMessageForTest(_("Execute '%s'")%"dispatch-conf")
+        # run dispatch conf interactive
+        os.system("chroot %s /bin/bash -c '/usr/sbin/dispatch-conf'"%
+                  distrPath)
+
     def prepareSourceDistributive(self,distr):
         """Unmount all bind,proc mount points from source distribute"""
         mp = self.clVars.Get('cl_builder_path')
@@ -243,6 +250,7 @@ class cl_builder(color_print):
             self.printByResult(True)
         distrPath = distr.convertToDirectory().getDirectory()
         self.cleanNeedlessKernelData(distrPath)
+        self.dispatchConf(distrPath)
 
         if self.assembleIso and \
             self.clVars.Get('os_builder_profile').endswith('binary'):
